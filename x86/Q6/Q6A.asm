;factorial of a positive integer using (a) loops,
;Tejeshwara.B.M & Rashmi.R
;06/08/2016


.data
MSG1 DB 10,13,' ENTER A NUMBER : $'
MSG2 DB 10,13,' OUT OF RANGE $'
NUM DB ?
RESULT DW 02H DUP(?)

.code
Main proc
MOV AX,DATA
MOV DS,AX
;DISPLAY MSG1
MOV DX,OFFSET MSG1
MOV AH,09H
INT 21H
MOV AH,01H
INT 21H
MOV NUM,AL
CALL ASCII_TO_HEX
CMP AL,0CH
JA L1
CALL FACTORIAL
JMP L2 
Main endp

ASCII_TO_HEX PROC NEAR
MOV AL,NUM
CMP AL,39H
JA S1
SUB AL,30H
JMP S2
S1:
SUB AL,37H
S2:
MOV NUM,AL
RET 
ASCII_TO_HEX endp

FACTORIAL PROC NEAR
XOR AX,AX
XOR DX,DX
XOR BX,BX
XOR CX,CX
MOV AL,NUM
MOV BL,AL
CMP AL,01H
JBE NEXT2
DEC BX
UP:
MOV CX,AX
MOV AX,DX
MUL BX
XCHG AX,CX
MUL BX
ADD DX,CX
DEC BX
JNZ UP
MOV RESULT,AX
MOV RESULT+2,DX
JMP LAST
NEXT2:
MOV RESULT,0001H
MOV RESULT+2,0000H
LAST:
RET
L1:
MOV DX,OFFSET MSG2
MOV AH,09H
INT 21H
L2:
MOV AH,04CH
INT 21H  

FACTORIAL endp
End Main